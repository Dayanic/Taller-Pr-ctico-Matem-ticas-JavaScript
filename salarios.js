const salarios = [];
salarios.push({
  name: 'Juanita',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 250, },
    { year: 2019, empresa: 'Freelance', salario: 250, },
    { year: 2020, empresa: 'Industrias Mokepon', salario: 850, },
    { year: 2021, empresa: 'Industrias Mokepon', salario: 1050, },
    { year: 2022, empresa: 'Industrias Mokepon', salario: 1250, },
    { year: 2023, empresa: 'Industrias Mokepon', salario: 1250, },
  ],
});
salarios.push({
  name: 'Alex',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 450, },
    { year: 2019, empresa: 'Freelance', salario: 550, },
    { year: 2020, empresa: 'Freelance', salario: 400, },
    { year: 2021, empresa: 'Industrias Mokepon', salario: 1050, },
    { year: 2022, empresa: 'Industrias Mokepon', salario: 1250, },
    { year: 2023, empresa: 'Industrias Mokepon', salario: 1250, },
  ],
});
salarios.push({
  name: 'Nath',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 600, },
    { year: 2019, empresa: 'Freelance', salario: 625, },
    { year: 2020, empresa: 'Freelance', salario: 575, },
    { year: 2021, empresa: 'MarketerosCOL', salario: 1000, },
    { year: 2022, empresa: 'MarketerosCOL', salario: 1000, },
    { year: 2023, empresa: 'MarketerosCOL', salario: 1100, },
  ],
});
salarios.push({
  name: 'Julia',
  trabajos: [
    { year: 2018, empresa: 'MarketerosCOL', salario: 1000, },
    { year: 2019, empresa: 'MarketerosCOL', salario: 2000, },
    { year: 2020, empresa: 'MarketerosCOL', salario: 2000, },
    { year: 2021, empresa: 'MarketerosCOL', salario: 2000, },
    { year: 2022, empresa: 'MarketerosCOL', salario: 2000, },
    { year: 2023, empresa: 'MarketerosCOL', salario: 2000, },
  ],
});
salarios.push({
  name: 'Jonatan',
  trabajos: [
    { year: 2019, empresa: 'MarketerosCOL', salario: 1000, },
    { year: 2020, empresa: 'MarketerosCOL', salario: 1000, },
    { year: 2021, empresa: 'MarketerosCOL', salario: 800, },
    { year: 2022, empresa: 'MarketerosCOL', salario: 900, },
    { year: 2023, empresa: 'MarketerosCOL', salario: 1000, },
  ],
});
salarios.push({
  name: 'Armando',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 750, },
    { year: 2019, empresa: 'Freelance', salario: 750, },
    { year: 2020, empresa: 'Freelance', salario: 750, },
    { year: 2021, empresa: 'Freelance', salario: 850, },
    { year: 2022, empresa: 'Freelance', salario: 850, },
    { year: 2023, empresa: 'Freelance', salario: 850, },
  ],
});
salarios.push({
  name: 'Dilan',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 500, },
    { year: 2019, empresa: 'Freelance', salario: 500, },
    { year: 2020, empresa: 'Freelance', salario: 600, },
    { year: 2021, empresa: 'Mokepon', salario: 1100, },
    { year: 2022, empresa: 'Mokepon', salario: 1100, },
    { year: 2023, empresa: 'Mokepon', salario: 1100, },
  ],
});
salarios.push({
  name: 'Zamir',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 400, },
    { year: 2019, empresa: 'Freelance', salario: 500, },
    { year: 2020, empresa: 'Freelance', salario: 500, },
    { year: 2021, empresa: 'Mokepon', salario: 1100, },
    { year: 2022, empresa: 'Mokepon', salario: 1100, },
    { year: 2023, empresa: 'Mokepon', salario: 1200, },
  ],
});
salarios.push({
  name: 'Daniela',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 500, },
    { year: 2019, empresa: 'Freelance', salario: 500, },
    { year: 2020, empresa: 'Freelance', salario: 500, },
    { year: 2021, empresa: 'Freelance', salario: 550, },
    { year: 2022, empresa: 'Freelance', salario: 550, },
    { year: 2023, empresa: 'MarketerosCOL', salario: 850, },
  ],
});
salarios.push({
  name: 'Daniel',
  trabajos: [
    { year: 2020, empresa: 'Freelance', salario: 150, },
    { year: 2021, empresa: 'Freelance', salario: 450, },
    { year: 2022, empresa: 'Freelance', salario: 550, },
    { year: 2023, empresa: 'Freelance', salario: 650, },
  ],
});
salarios.push({
  name: 'Rigoberto',
  trabajos: [
    { year: 2018, empresa: 'MarketerosCOL', salario: 700, },
    { year: 2019, empresa: 'MarketerosCOL', salario: 700, },
    { year: 2020, empresa: 'MarketerosCOL', salario: 700, },
    { year: 2021, empresa: 'MarketerosCOL', salario: 750, },
    { year: 2022, empresa: 'MarketerosCOL', salario: 750, },
    { year: 2023, empresa: 'MarketerosCOL', salario: 750, },
  ],
});
salarios.push({
  name: 'Alicia',
  trabajos: [
    { year: 2018, empresa: 'Inversionify', salario: 300, },
    { year: 2019, empresa: 'Inversionify', salario: 1700, },
    { year: 2020, empresa: 'Inversionify', salario: 2700, },
    { year: 2021, empresa: 'Inversionify', salario: 3750, },
    { year: 2022, empresa: 'Freelance', salario: 1550, },
    { year: 2023, empresa: 'Freelance', salario: 350, },
  ],
});
salarios.push({
  name: 'Teodoro',
  trabajos: [
    { year: 2018, empresa: 'Freelance', salario: 600, },
    { year: 2019, empresa: 'Freelance', salario: 700, },
    { year: 2020, empresa: 'Inversionify', salario: 1700, },
    { year: 2021, empresa: 'Inversionify', salario: 1750, },
    { year: 2022, empresa: 'Freelance', salario: 800, },
    { year: 2023, empresa: 'Freelance', salario: 850, },
  ],
});
salarios.push({
  name: 'Bruce',
  trabajos: [
    { year: 2018, empresa: 'Wayne Enterprises', salario: 4600, },
    { year: 2019, empresa: 'Wayne Enterprises', salario: 4700, },
    { year: 2020, empresa: 'Wayne Enterprises', salario: 3700, },
    { year: 2021, empresa: 'Wayne Enterprises', salario: 4150, },
    { year: 2022, empresa: 'Wayne Enterprises', salario: 4400, },
    { year: 2023, empresa: 'Wayne Enterprises', salario: 3850, },
  ],
});
salarios.push({
  name: 'Alfred',
  trabajos: [
    { year: 2018, empresa: 'Wayne Enterprises', salario: 2000, },
    { year: 2019, empresa: 'Wayne Enterprises', salario: 2000, },
    { year: 2020, empresa: 'Wayne Enterprises', salario: 1500, },
    { year: 2021, empresa: 'Wayne Enterprises', salario: 1500, },
    { year: 2022, empresa: 'Wayne Enterprises', salario: 2000, },
    { year: 2023, empresa: 'Wayne Enterprises', salario: 1500, },
  ],
});
salarios.push({
  name: 'Clark Kent',
  trabajos: [
    { year: 2018, empresa: 'Daily Planet', salario: 1000, },
    { year: 2019, empresa: 'Daily Planet', salario: 1500, },
    { year: 2020, empresa: 'Daily Planet', salario: 1000, },
    { year: 2021, empresa: 'Daily Planet', salario: 1500, },
    { year: 2022, empresa: 'Daily Planet', salario: 2000, },
    { year: 2023, empresa: 'Daily Planet', salario: 1500, },
  ],
});
salarios.push({
  name: 'Lois Lane',
  trabajos: [
    { year: 2018, empresa: 'Daily Planet', salario: 2000, },
    { year: 2019, empresa: 'Daily Planet', salario: 2500, },
    { year: 2020, empresa: 'Daily Planet', salario: 2000, },
    { year: 2021, empresa: 'Daily Planet', salario: 2500, },
    { year: 2022, empresa: 'Daily Planet', salario: 2500, },
    { year: 2023, empresa: 'Daily Planet', salario: 2500, },
  ],
});
salarios.push({
  name: 'Jimmy Olsen',
  trabajos: [
    { year: 2018, empresa: 'Daily Planet', salario: 1500, },
    { year: 2019, empresa: 'Daily Planet', salario: 2000, },
    { year: 2020, empresa: 'Daily Planet', salario: 2000, },
    { year: 2021, empresa: 'Daily Planet', salario: 2500, },
    { year: 2022, empresa: 'Daily Planet', salario: 2500, },
    { year: 2023, empresa: 'Daily Planet', salario: 1500, },
  ],
});
salarios.push({
  name: 'Perry White',
  trabajos: [
    { year: 2018, empresa: 'Daily Planet', salario: 3500, },
    { year: 2019, empresa: 'Daily Planet', salario: 3700, },
    { year: 2020, empresa: 'Daily Planet', salario: 3800, },
    { year: 2021, empresa: 'Daily Planet', salario: 4000, },
    { year: 2022, empresa: 'Daily Planet', salario: 4050, },
    { year: 2023, empresa: 'Daily Planet', salario: 4050, },
  ],
});
salarios.push({
  name: 'Lex Luthor',
  trabajos: [
    { year: 2018, empresa: 'LexCorp', salario: 5000, },
    { year: 2019, empresa: 'LexCorp', salario: 5300, },
    { year: 2020, empresa: 'LexCorp', salario: 4000, },
    { year: 2021, empresa: 'LexCorp', salario: 3000, },
    { year: 2022, empresa: 'LexCorp', salario: 3500, },
    { year: 2023, empresa: 'LexCorp', salario: 3050, },
  ],
});

// Análisis salarial personal para Juanita
function encontrarPersona(personaBuscada) {
    return salarios.find(persona => persona.name == personaBuscada);
}

function medianaPorPersona(nombrePersona) {
    const trabajos = encontrarPersona(nombrePersona).trabajos;

    const salarios = trabajos.map(function (elemento) {
        return elemento.salario;
    })

    const medianaSalario = PlatziMath.calcularMediana(salarios);
    return medianaSalario;
}

function proyeccionPorPersona(nombrePersona) {
    const trabajos = encontrarPersona(nombrePersona).trabajos;

    let porcentajesCrecimiento = [];

    for (let i = 1; i < trabajos.length; i++) {
        const salarioActual = trabajos[i].salario;
        const salarioPasado = trabajos[i - 1].salario;
        const crecimiento = salarioActual - salarioPasado;
        const porcentajeCrecimiento = crecimiento / salarioPasado;
        porcentajesCrecimiento.push(porcentajeCrecimiento);
    }

    const medianaCrecimiento = PlatziMath.calcularMediana(porcentajesCrecimiento);
    console.log({porcentajesCrecimiento, medianaCrecimiento});

    const ultimoSalario = trabajos[trabajos.length - 1].salario;
    const aumento = ultimoSalario * medianaCrecimiento;
    const nuevoSalario = ultimoSalario + aumento;

    return nuevoSalario;
    console.log({ultimoSalario});
    console.log({nuevoSalario});
}

//Análisis salarial empresarial (Reestructurando el array de salarios y objetos)
const empresas = {};

for (persona of salarios) {
    for (trabajo of persona.trabajos) {
        if (!empresas[trabajo.empresa]) {
            empresas[trabajo.empresa] = {};
        } 

        if (!empresas[trabajo.empresa][trabajo.year]) {
            empresas[trabajo.empresa][trabajo.year] = [];
        }

        empresas[trabajo.empresa][trabajo.year].push(trabajo.salario);
    }
}

function medianaYearEmpresa(nombreEmpresa, anio) {
    if (!empresas[nombreEmpresa]) {
        console.warn('La empresa no existe');
    } else if (!empresas[nombreEmpresa][anio]) {
        console.warn('La empresa no dio salarios este año');
    } else {
        const arrayEmpresa = empresas[nombreEmpresa][anio];
        const mediana = PlatziMath.calcularMediana(arrayEmpresa);
        return (mediana);
    }
}

function proyeccionPorEmpresa(nombreEmpresa) {
    if (!empresas[nombreEmpresa]) {
        console.warn('La empresa no existe');
    } else {
        const empresaYears = Object.keys(empresas[nombreEmpresa]);
        const listaMedianaYears = empresaYears.map((year) => {
            return medianaYearEmpresa(nombreEmpresa, year);
        });

        console.log(listaMedianaYears);
        
        let porcentajesCrecimiento = [];

        for (let i = 1; i < listaMedianaYears.length; i++) {
            const salarioActual = listaMedianaYears[i];
            const salarioPasado = listaMedianaYears[i - 1];
            const crecimiento = salarioActual - salarioPasado;
            const porcentajeCrecimiento = crecimiento / salarioPasado;
            porcentajesCrecimiento.push(porcentajeCrecimiento);
        }

        const medianaCrecimiento = PlatziMath.calcularMediana(porcentajesCrecimiento);
        console.log({porcentajesCrecimiento, medianaCrecimiento});

        const ultimaMediana = listaMedianaYears[listaMedianaYears.length - 1];
        const aumento = ultimaMediana * medianaCrecimiento;
        const nuevoMediana = ultimaMediana + aumento;

        console.log({ultimaMediana});
        console.log({nuevoMediana});
        return nuevoMediana;
    }
}

//Análisis general
function medianaGeneral() {
    const listaMedianas = salarios.map(persona => medianaPorPersona(persona.name));
    const mediana = PlatziMath.calcularMediana(listaMedianas);

    return (mediana);
}

function medianaTop10() {
    const listaMedianas = salarios.map(persona => medianaPorPersona(persona.name));
    const medianasOrdenadas = PlatziMath.ordenList(listaMedianas);
    const cantidad = listaMedianas.length / 10;
    const limite = medianasOrdenadas.length - cantidad;

    //El método slice nos trae los datos de un array desde los índices que le indique
    const top10 = medianasOrdenadas.slice(limite, medianasOrdenadas.length)
    //El método splice nos extrae los datos de un array desde los índices que le indique y los agrega en un nuevo array
    // const top10 = medianasOrdenadas.slice(limite, medianasOrdenadas.length)

    const medianaTop10 = PlatziMath.calcularMediana(top10);
    return (medianaTop10);
}

//hacer una calculadora de promedios RETO termino de curso